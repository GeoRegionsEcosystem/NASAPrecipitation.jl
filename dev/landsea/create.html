<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Loading LandSea Datasets · NASAPrecipitation.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../index.html"><img src="../assets/logo.png" alt="NASAPrecipitation.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">NASAPrecipitation.jl</a></span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">NASAPrecipitation Datasets</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../nasaprecipitation/intro.html">What is a NASA Precipitation Dataset?</a></li><li><a class="tocitem" href="../nasaprecipitation/define.html">Defining NASA Precipitation Datasets</a></li><li><a class="tocitem" href="../nasaprecipitation/imerg.html">GPM IMERG Datasets</a></li><li><a class="tocitem" href="../nasaprecipitation/trmm.html">TRMM TMPA Datasets</a></li><li><a class="tocitem" href="../nasaprecipitation/dummy.html">Dummy Datasets</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Using NASAPrecipitation.jl</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../using/georegions.html">Integration with GeoRegions.jl</a></li><li><a class="tocitem" href="../using/download.html">Downloading and Saving Datasets</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">LandSea Datasets: GPM and TRMM</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="intro.html">What is a LandSea Dataset?</a></li><li class="is-active"><a class="tocitem" href="create.html">Loading LandSea Datasets</a><ul class="internal"><li><a class="tocitem" href="#Retrieving-IMERG-and-TRMM-Land-Sea-Mask-over-Java"><span>Retrieving IMERG and TRMM Land-Sea Mask over Java</span></a></li><li><a class="tocitem" href="#API"><span>API</span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">LandSea Datasets: GPM and TRMM</a></li><li class="is-active"><a href="create.html">Loading LandSea Datasets</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="create.html">Loading LandSea Datasets</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/natgeo-wong/NASAPrecipitation.jl/blob/main/docs/src/landsea/create.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Loading-and-Saving-Land-Sea-Mask-Datasets"><a class="docs-heading-anchor" href="#Loading-and-Saving-Land-Sea-Mask-Datasets">Loading and Saving Land-Sea Mask Datasets</a><a id="Loading-and-Saving-Land-Sea-Mask-Datasets-1"></a><a class="docs-heading-anchor-permalink" href="#Loading-and-Saving-Land-Sea-Mask-Datasets" title="Permalink"></a></h1><p>The Land-Sea Dataset can be obtained using the function <code>getLandSea()</code>.  There are two options:</p><ol><li>Saving the <code>LandSea</code> dataset as a local NetCDF file</li><li>Extract the <code>LandSea</code> dataset directly from the OPeNDAP servers</li></ol><p>Option (1) has a longer initial cost, because you have to download the global file, and then use the data from the global file to extract out the information for the GeoRegion of interest.  However, once the data has been downloaded once, you don&#39;t need to download the data again and this greatly speeds up latency time.</p><p>Option (2) however, is much faster for smaller GeoRegions when loading the data directly from OPeNDAP is much easier than downloading the entire dataset.  However, loading data directly from OPeNDAP comes with its own noticeable latency, which can add up if done iteratively.</p><p>You can toggle between the two options using the keyword argument <code>savelsd</code> - <code>true</code> sets the function to option 1, and <code>false</code> is option 2.</p><p>See end of the page for the API</p><h3 id="Setup"><a class="docs-heading-anchor" href="#Setup">Setup</a><a id="Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Setup" title="Permalink"></a></h3><pre><code class="language-julia hljs">using NASAPrecipitation
using DelimitedFiles
using CairoMakie

download(&quot;https://raw.githubusercontent.com/natgeo-wong/GeoPlottingData/main/coastline_resl.txt&quot;,&quot;coast.cst&quot;)
coast = readdlm(&quot;coast.cst&quot;,comments=true)
clon  = coast[:,1]
clat  = coast[:,2]
nothing</code></pre><h2 id="Retrieving-IMERG-and-TRMM-Land-Sea-Mask-over-Java"><a class="docs-heading-anchor" href="#Retrieving-IMERG-and-TRMM-Land-Sea-Mask-over-Java">Retrieving IMERG and TRMM Land-Sea Mask over Java</a><a id="Retrieving-IMERG-and-TRMM-Land-Sea-Mask-over-Java-1"></a><a class="docs-heading-anchor-permalink" href="#Retrieving-IMERG-and-TRMM-Land-Sea-Mask-over-Java" title="Permalink"></a></h2><p>First, we must define the <code>NASAPrecipitation</code> datasets, and the GeoRegion of interest.</p><pre><code class="language-julia hljs">npd_imerg = IMERGDummy(path=pwd())
npd_trmm  = TRMMDummy(path=pwd())
geo  = RectRegion(&quot;JAV&quot;,&quot;GLB&quot;,&quot;Java&quot;,[-5.5,-9,115,105],savegeo=false)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">The Rectilinear Region JAV has the following properties:
    Region ID    (ID) : JAV
    Parent ID   (pID) : GLB
    Name      (name)  : Java
    Bounds  (N,S,E,W) : [-5.5, -9.0, 115.0, 105.0]
        (is180,is360) : (false, true)
</code></pre><p>Then, we retrieve the IMERG LandSea Dataset</p><pre><code class="language- hljs">lsd_imerg = getLandSea(npd_imerg,geo)</code></pre><p>And then the TRMM LandSea Dataset</p><pre><code class="language- hljs">lsd_trmm  = getLandSea(npd_trmm ,geo)</code></pre><p>And we plot them below for comparison:</p><pre><code class="language- hljs">fig = Figure()
slon,slat = coordGeoRegion(geo)
aspect = (maximum(slon)-minimum(slon))/(maximum(slat)-minimum(slat))

ax1 = Axis(
    fig[1,1],width=750,height=750/aspect,
    title=&quot;IMERG Land-Sea Mask&quot;,ylabel=&quot;Latitude / º&quot;,
    limits=(minimum(slon)-0.5,maximum(slon)+0.5,minimum(slat)-0.5,maximum(slat)+0.5)
)
contourf!(
    ax1,lsd_imerg.lon,lsd_imerg.lat,lsd_imerg.lsm,colormap=:delta,
    levels=range(0.05,0.95,length=19),extendlow=:auto,extendhigh=:auto
)
lines!(ax1,slon,slat,linewidth=5)

ax2 = Axis(
    fig[2,1],width=750,height=750/aspect,
    title=&quot;TRMM Land-Sea Mask&quot;,xlabel=&quot;Longitude / º&quot;,ylabel=&quot;Latitude / º&quot;,
    limits=(minimum(slon)-0.5,maximum(slon)+0.5,minimum(slat)-0.5,maximum(slat)+0.5)
)
contourf!(
    ax2,lsd_trmm.lon,lsd_trmm.lat,lsd_trmm.lsm,colormap=:delta,
    levels=range(0.05,0.95,length=19),extendlow=:auto,extendhigh=:auto
)
lines!(ax2,slon,slat,linewidth=5)

resize_to_layout!(fig)
fig</code></pre><p>We see that, as expected, the IMERG <code>LandSea</code> dataset is of a higher resolution than that of TRMM, which also explains the gap between the border of the GeoRegion and the data, because in GPM IMERG and TRMM TMPA datasets, the grid <em>edges</em> start at [ N,S,E,W ] = [ 90,-90,360,0 ], not the grid centers.</p><h2 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GeoRegions.getLandSea" href="#GeoRegions.getLandSea"><code>GeoRegions.getLandSea</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getLandSea(
    npd :: NASAPrecipitationDataset,
    geo :: GeoRegion = GeoRegion(&quot;GLB&quot;);
    returnlsd = true,
    FT = Float32
) -&gt; LandSea</code></pre><p>Retrieve the Land-Sea Mask data for the <code>NASAPrecipitationDataset</code> specified.</p><p><strong>Arguments</strong></p><ul><li><code>npd</code> : The <code>NASAPrecipitationDataset</code> specified, can be either IMERG or TRMM, the function will download the relevant Land-Sea mask without needing further specification.</li><li><code>geo</code> : The GeoRegion of interest</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>returnlsd</code> : If <code>true</code> return the data as a <code>LandSea</code> dataset. Otherwise, the data is simply saved into the npd.maskpath directory.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/natgeo-wong/NASAPrecipitation.jl/blob/ecd699b05c9909252a4df9b5ee30c0eae058eec1/src/landsea/imerg.jl#L1-L19">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="intro.html">« What is a LandSea Dataset?</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Sunday 28 May 2023 07:34">Sunday 28 May 2023</span>. Using Julia version 1.9.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
